<html><head><meta charset='UTF-8'><meta name='viewport' content='initial-scale=1,width=device-width,height=device-height,viewport-fit=cover,maximum-scale=1,user-scalable=no'><style> *{font-family:Arial;} body {font-size:18px;background-color:var(--wn);border-collapse:collapse;border:none;margin:0;padding:0;border:0;border-spacing:0px;-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}</style></head><body><div id='tuesday' style='width:100%;height:100vh;'> </div><script type='text/javascript'>let story_json=new Array;var tue_text_view,tue_text_block,tue_text_element,languare,dialog_text,dialog_timeout,tue_story,tue_bg_music,arr_dialog,timers,tuesday=document.getElementById("tuesday"),tue_name_block=document.createElement("div"),scene=0,dialog=0,dialog_speed=50,dialog_letter=0,tue_fullScreen=!1,controll=!0,ruby_rt=[];function cmenu(){return!1}function get_lang(){languare=void 0!=navigator.languages?navigator.languages[0].substring(0,2):navigator.languagesubstring(0,2);for(var support,i=0;i<story_json.parameters.languares.length;i++)languare==story_json.parameters.languares[i]&&(support=!0);support||(languare=story_json.parameters.languares[0])}function load_story(tip,url){if("data"==tip)story_json=url,base_creation(),tuesday.dispatchEvent(new Event("script_loaded")),story_json.parameters.sounds&&creation_sound();else if("file"==tip){var xmlhttp=new XMLHttpRequest;xmlhttp.onreadystatechange=function(){if(4==this.readyState&&(200==this.status||0==this.status)){try{story_json=JSON.parse(this.responseText)}catch(a){this.status>0&&alert("Json structure error")}base_creation(),tuesday.dispatchEvent(new Event("script_loaded")),story_json.parameters.sounds&&creation_sound()}},xmlhttp.open("GET",url,!0),xmlhttp.send(),xmlhttp.onerror=function(){0==this.status&&alert("Error load json file Cross-Origin Resource Sharing(CORS)")}}}function name_block_update(){story_json.parameters.name_panel.color&&(tue_name_block.style.backgroundColor=story_json.parameters.name_panel.color),story_json.parameters.name_panel.color_text?tue_name_block.style.color=story_json.parameters.name_panel.color_text:tue_name_block.style.color=story_json.parameters.text_panel.color_text,tue_name_block.style.position="absolute",tue_name_block.id="tue_name_block",tue_name_block.style.padding=story_json.parameters.name_panel.indent_text,tue_name_block.style.fontSize=story_json.parameters.name_panel.size_text?story_json.parameters.name_panel.size_text:story_json.parameters.font_size,tue_name_block.style.fontFamily=story_json.parameters.name_panel.font_family?story_json.parameters.name_panel.font_family:story_json.parameters.font,tue_name_block.style.display="flex",tue_name_block.style.justifyContent=story_json.parameters.name_panel.align?story_json.parameters.name_panel.align[0]:"center",tue_name_block.style.alignItems=story_json.parameters.name_panel.align?story_json.parameters.name_panel.align[1]:"center",(tue_name_block.style.width=0!=story_json.parameters.name_panel.size[0])&&(tue_name_block.style.width=story_json.parameters.name_panel.size[0]),tue_name_block.style.height=story_json.parameters.name_panel.size[1],tue_name_block.style.left=""==story_json.parameters.name_panel.position[0]||"0"==story_json.parameters.name_panel.position[0]?null:story_json.parameters.name_panel.position[0],tue_name_block.style.right=""==story_json.parameters.name_panel.position[1]||"0"==story_json.parameters.name_panel.position[1]?null:story_json.parameters.name_panel.position[1],tue_name_block.style.top=""==story_json.parameters.name_panel.position[2]||"0"==story_json.parameters.name_panel.position[2]?""==story_json.parameters.name_panel.position[3]||"0"==story_json.parameters.name_panel.position[3]?"0px":null:story_json.parameters.name_panel.position[2],tue_name_block.style.bottom=""==story_json.parameters.name_panel.position[3]||"0"==story_json.parameters.name_panel.position[3]?null:story_json.parameters.name_panel.position[3],tue_name_block.style.zIndex=1001}function base_creation(){if(get_lang(),story_json.parameters.style_file&&add_style(story_json.parameters.style_file),dialog_speed=story_json.parameters.text_panel.dialog_speed,story_json.parameters.title&&(story_json.parameters.title[languare]?document.title=story_json.parameters.title[languare]:document.title=story_json.parameters.title),story_json.parameters.pixelmode&&(tuesday.style.imageRendering="pixelated",tuesday.style.fontSmooth="never"),tuesday.style.backgroundRepeat="no-repeat",tuesday.style.backgroundPosition="center",tuesday.style.position="relative",tuesday.style.overflow="hidden",story_json.parameters.cursors&&story_json.parameters.cursors.main&&(tuesday.style.cursor="url("+art_data(story_json.parameters.cursors.main[0])+") "+story_json.parameters.cursors.main[1]+" "+story_json.parameters.cursors.main[2]+",auto"),tuesday.innerHTML="<table id='tue_text_block' align='center'><tbody><tr><td id='tue_text_element'><div id='tue_text_view'></div></td></tr></tbody></table>",tue_text_block=document.getElementById("tue_text_block"),tue_text_element=document.getElementById("tue_text_element"),tue_text_element.style.position="relative",story_json.parameters.text_panel.className&&(tue_text_block.className=story_json.parameters.text_panel.className),story_json.parameters.text_panel.style&&(tue_text_block.style=story_json.parameters.text_panel.style),tue_text_block.style.position="absolute",story_json.parameters.text_panel.size&&(tue_text_block.style.width=story_json.parameters.text_panel.size[0],tue_text_block.style.height=story_json.parameters.text_panel.size[1]),story_json.parameters.text_panel.position?(story_json.parameters.text_panel.position[0]&&"0"!=story_json.parameters.text_panel.position[0]||story_json.parameters.text_panel.position[1]&&"0"!=story_json.parameters.text_panel.position[1]?(tue_text_block.style.left="0"!=story_json.parameters.text_panel.position[0]?story_json.parameters.text_panel.position[0]:null,tue_text_block.style.right="0"!=story_json.parameters.text_panel.position[1]?story_json.parameters.text_panel.position[1]:null,tue_text_block.style.margin=null):(tue_text_block.style.marginLeft="auto",tue_text_block.style.marginRight="auto",tue_text_block.style.left=0,tue_text_block.style.right=0),tue_text_block.style.top="0"!=story_json.parameters.text_panel.position[2]?story_json.parameters.text_panel.position[2]:null):(tue_text_block.style.left=0,tue_text_block.style.right=0),tue_text_block.style.bottom="0"!=story_json.parameters.text_panel.indent_bottom?story_json.parameters.text_panel.indent_bottom:null,tue_text_block.style.zIndex=1e3,tue_text_block.style.borderSpacing=0,tue_text_view=document.getElementById("tue_text_view"),tue_text_view.style.boxSizing="border-box",tue_text_view.style.padding=story_json.parameters.text_panel.indent_text,tue_text_view.style.fontSize=story_json.parameters.text_panel.size_text?story_json.parameters.text_panel.size_text:story_json.parameters.font_size,tue_text_view.style.fontFamily=story_json.parameters.text_panel.font_family?story_json.parameters.text_panel.font_family:story_json.parameters.font,tue_text_view.style.whiteSpace="pre-wrap",tue_text_view.style.height="100%",story_json.parameters.text_panel.scroll&&(tue_text_block.style.paddingTop=story_json.parameters.text_panel.indent_text,tue_text_view.style.height=tue_text_view.offsetHeight,tue_text_view.style.position="relative",tue_text_view.style.overflowY="hidden"),story_json.parameters.name_panel&&(story_json.parameters.name_panel.className&&(tue_name_block.className=story_json.parameters.name_panel.className),story_json.parameters.name_panel.style&&(tue_name_block.style=story_json.parameters.name_panel.style),tue_text_element.appendChild(tue_name_block),name_block_update()),tue_bg_music=document.createElement("AUDIO"),tue_bg_music.id="tue_bg_music",tuesday.appendChild(tue_bg_music),story_json.parameters.launch_story)tue_story=story_json.parameters.launch_story;else for(var i=0;i<2;i++)if("parameters"!=Object.getOwnPropertyNames(story_json)[i]){story_json.parameters.launch_story=Object.getOwnPropertyNames(story_json)[1],tue_story=story_json.parameters.launch_story;break}bg_art(story_json.parameters.text_panel,"tue_text_block"),tuesday.dispatchEvent(new Event("script_executed")),story_json.parameters.autosave&&localStorage.getItem("tue_auto_data")&&(story_json.parameters.variables=JSON.parse(localStorage.getItem("tue_auto_data"))),creation_buttons(),creation_scene()}function bg_art(arr_u,tue_id,art){if((tue_id=document.getElementById(tue_id)).style.backgroundRepeat="no-repeat",tue_id.style.backgroundPosition=arr_u.art_align?arr_u.art_align[0]+" "+arr_u.art_align[1]:"center",art=art||arr_u.art){var a=art_data(art);a.length>0&&(tue_id.style.backgroundImage="url('"+a+"')")}arr_u.art_size&&("patch"==arr_u.art_size&&(tue_id.style.backgroundImage="none"),"object"==typeof arr_u.art_size?tue_id.style.backgroundSize=arr_u.art_size[0]+" "+arr_u.art_size[1]:"patch"==arr_u.art_size?(tue_id.style.backgroundImage="none",tue_id.style.backgroundSize="none",tue_id.style.backgroundClip="padding-box",tue_id.style.borderStyle="solid",tue_id.style.borderWidth=arr_u.patch[0]+"px "+arr_u.patch[1]+"px "+arr_u.patch[2]+"px "+arr_u.patch[3]+"px",tue_id.style.borderImage="url('"+art_data(arr_u.art)+"') "+arr_u.patch[0]+" "+arr_u.patch[1]+" "+arr_u.patch[2]+" "+arr_u.patch[3]+" stretch stretch"):tue_id.style.backgroundSize=arr_u.art_size)}function creation_buttons(){for(i=0;i<story_json.parameters.buttons.length;i++){var button=document.createElement("div"),v="";story_json.parameters.buttons[i].sound&&(v+=story_json.parameters.buttons[i].sound?get_sound(story_json.parameters.buttons[i].sound):(story_json.parameters.buttons[i].sound_stop?";"+get_stop_sound(story_json.parameters.buttons[i].sound_stop):"")+";"),story_json.parameters.buttons[i].js&&(v+=story_json.parameters.buttons[i].js),button.setAttribute("onclick",v+";"),story_json.parameters.buttons[i].className&&(button.className=story_json.parameters.buttons[i].className),story_json.parameters.buttons[i].style&&(button.style=story_json.parameters.buttons[i].style),story_json.parameters.buttons[i].text&&("object"!=typeof story_json.parameters.buttons[i].text||story_json.parameters.buttons[i].text[languare]&&"object"!=typeof story_json.parameters.buttons[i].text[languare])&&(button.innerHTML=values_button(art_data(story_json.parameters.buttons[i].text)),button.style.padding=story_json.parameters.buttons[i].indent_text,button.style.display="flex",button.style.whiteSpace="pre-wrap",button.style.justifyContent=story_json.parameters.buttons[i].align?story_json.parameters.buttons[i].align[0]:"center",button.style.alignItems=story_json.parameters.buttons[i].align?story_json.parameters.buttons[i].align[1]:"center",button.style.color=story_json.parameters.buttons[i].color_text,button.style.fontSize=story_json.parameters.buttons[i].size_text?story_json.parameters.buttons[i].size_text:story_json.parameters.font_size,button.style.fontFamily=story_json.parameters.buttons[i].font_family?story_json.parameters.buttons[i].font_family:story_json.parameters.font),button.style.zIndex=2e3+i,button.id=story_json.parameters.buttons[i].name,button.classList.add("tue_controll"),button.style.position="absolute",button.style.width=story_json.parameters.buttons[i].size[0],button.style.height=story_json.parameters.buttons[i].size[1],button.style.backgroundColor=story_json.parameters.buttons[i].color,button.style.backgroundRepeat="no-repeat",story_json.parameters.cursors&&story_json.parameters.cursors.button&&(button.style.cursor="url("+art_data(story_json.parameters.cursors.button[0])+") "+story_json.parameters.cursors.button[1]+" "+story_json.parameters.cursors.button[2]+",auto"),button.style.backgroundPosition=story_json.parameters.buttons[i].art_align?story_json.parameters.buttons[i].art_align[0]+" "+story_json.parameters.buttons[i].art_align[1]:"center",story_json.parameters.buttons[i].art&&(button.style.backgroundImage="url('"+art_data(story_json.parameters.buttons[i].art)+"')"),story_json.parameters.buttons[i].art_size&&("patch"==story_json.parameters.buttons[i].art_size&&(button.style.backgroundImage="none"),"object"==typeof story_json.parameters.buttons[i].art_size?button.style.backgroundSize=story_json.parameters.buttons[i].art_size[0]+" "+story_json.parameters.buttons[i].art_size[1]:"patch"==story_json.parameters.buttons[i].art_size?(button.style.backgroundImage="none",button.style.backgroundSize="none",button.style.backgroundClip="padding-box",button.style.borderStyle="solid",button.style.borderWidth=story_json.parameters.buttons[i].patch[0]+"px "+story_json.parameters.buttons[i].patch[1]+"px "+story_json.parameters.buttons[i].patch[2]+"px "+story_json.parameters.buttons[i].patch[3]+"px",button.style.borderImage="url('"+art_data(story_json.parameters.buttons[i].art)+"') "+story_json.parameters.buttons[i].patch[0]+" "+story_json.parameters.buttons[i].patch[1]+" "+story_json.parameters.buttons[i].patch[2]+" "+story_json.parameters.buttons[i].patch[3]+" stretch stretch"):button.style.backgroundSize=story_json.parameters.buttons[i].art_size),button.style.transform=(story_json.parameters.buttons[i].hotspot&&0!=story_json.parameters.buttons[i].hotspot[0]&&0!=story_json.parameters.buttons[i].hotspot[1]?" translate("+story_json.parameters.buttons[i].hotspot[0]+","+story_json.parameters.buttons[i].hotspot[1]+")":"")+(story_json.parameters.buttons[i].angle?"rotate("+story_json.parameters.buttons[i].angle+"deg)":""),0!=story_json.parameters.buttons[i].position[0]&&(button.style.left=story_json.parameters.buttons[i].position[0]),0!=story_json.parameters.buttons[i].position[1]&&(button.style.right=story_json.parameters.buttons[i].position[1]),0!=story_json.parameters.buttons[i].position[2]&&(button.style.top=story_json.parameters.buttons[i].position[2]),0!=story_json.parameters.buttons[i].position[3]&&(button.style.bottom=story_json.parameters.buttons[i].position[3]),tuesday.appendChild(button)}if(document.getElementById("tue_next")&&document.getElementById("tue_next").addEventListener("click",function(){go_story()}),document.getElementById("tue_back")&&document.getElementById("tue_back").addEventListener("click",function(){back_story()}),document.getElementById("tue_home")&&document.getElementById("tue_home").addEventListener("click",function(){go_to(story_json.parameters.launch_story)}),document.getElementById("tue_save")&&document.getElementById("tue_save").addEventListener("click",function(){save_stag("bookmark")}),document.getElementById("tue_load")&&document.getElementById("tue_load").addEventListener("click",function(){load_stag("bookmark")}),document.getElementById("tue_fullScreen")&&document.getElementById("tue_fullScreen").addEventListener("click",function(){full_screen()}),story_json.parameters.languares.length>1)for(var i=0;i<story_json.parameters.languares.length;i++)document.getElementById("tue_"+story_json.parameters.languares[i])&&document.getElementById("tue_"+story_json.parameters.languares[i]).setAttribute("onclick","languare ='"+story_json.parameters.languares[i]+"'")}function creation_scene(){if(arr_dialog=story_json[tue_story][scene],del_element("tue_html_scene"),arr_dialog.legacy_choice){for(var i=0;i<arr_dialog.legacy_choice.length;i++){var choice_n=arr_dialog.legacy_choice[i][0],choice_s=arr_dialog.legacy_choice[i][1],choice_v=arr_dialog.legacy_choice[i][2],choice_g=arr_dialog.legacy_choice[i][3];if(">"==choice_s&&story_json.parameters.variables[choice_n]>choice_v||"<"==choice_s&&story_json.parameters.variables[choice_n]<choice_v){"tue_go"!=choice_g?go_to(choice_g):next_scene();break}if("="==choice_s&&story_json.parameters.variables[choice_n]==choice_v){"tue_go"!=choice_g?go_to(choice_g):next_scene();break}if(arr_dialog.legacy_choice[i].go_to){arr_dialog.legacy_choice[i].go_to&&"tue_go"!=arr_dialog.legacy_choice[i].go_to?go_to(arr_dialog.legacy_choice[i].go_to):next_scene();break}else if(i==arr_dialog.legacy_choice.length-1){next_scene();break}}function next_scene(){scene++,dialog=0,creation_scene()}}else{if(tuesday.style.backgroundSize=arr_dialog.background_size?arr_dialog.background_size:"cover",arr_dialog.background_class?tuesday.className=arr_dialog.background_class:tuesday.className="",arr_dialog.background_color&&(tuesday.style.backgroundColor=arr_dialog.background_color),tuesday.style.backgroundPosition=arr_dialog.background_align?arr_dialog.background_align:"center",arr_dialog.background_image?tuesday.style.backgroundImage="url('"+art_data(arr_dialog.background_image)+"')":tuesday.style.backgroundImage=null,document.getElementById("tue_home")&&(tue_story==story_json.parameters.launch_story?document.getElementById("tue_home").style.visibility="hidden":document.getElementById("tue_home").style.visibility="visible"),arr_dialog.html){if(arr_dialog.html[languare]){var html=document.createElement("div");html.className="tue_html_scene",html.innerHTML=arr_dialog.html[languare],tuesday.appendChild(html)}else{var html=document.createElement("div");html.className="tue_html_scene",html.innerHTML=arr_dialog.html,tuesday.appendChild(html)}}arr_dialog.background_music&&(tue_bg_music.paused||!tue_bg_music.src.includes(encodeURI(arr_dialog.background_music)))?search_music():arr_dialog.background_music&&""!=arr_dialog.background_music||tue_bg_music.pause(),arr_dialog.dialogs&&arr_dialog.dialogs.length>0?creation_dialog():(del_element("tue_art"),del_element("tue_choice"),del_element("tue_html_dialog"),tue_text_block.style.visibility="hidden",tue_name_block.style.visibility="hidden"),tuesday.dispatchEvent(new Event(Object.keys(arr_dialog)[0]))}}function creation_dialog(){if("hidden"!=(arr_dialog=story_json[tue_story][scene].dialogs[dialog]).controll&&"hidden_here"!=arr_dialog.controll&&(tue_story!=story_json.parameters.launch_story||arr_dialog.text||0!=dialog||0!=scene)){if("visible"==arr_dialog.controll|| !0==controll){controll=!0;for(var buttons=document.getElementById("tuesday").getElementsByClassName("tue_controll"),i=0;i<buttons.length;i++)buttons[i].style.visibility="visible"}}else{0==dialog&&0==scene?controll=!0:"hidden_here"!=arr_dialog.controll&&(controll=!1);for(var buttons=document.getElementById("tuesday").getElementsByClassName("tue_controll"),i=0;i<buttons.length;i++)buttons[i].style.visibility="hidden"}if(scene!=story_json[tue_story].length-1||dialog!=story_json[tue_story][scene].dialogs.length-1||arr_dialog.go_to?controll&&(document.getElementById("tue_next").style.visibility="visible"):document.getElementById("tue_next").style.visibility="hidden",0!=scene||0!=dialog||arr_dialog.back_to?controll&&(document.getElementById("tue_back").style.visibility="visible"):document.getElementById("tue_back").style.visibility="hidden",arr_dialog.text&&""!=arr_dialog.text&&""!=arr_dialog.text[languare]?(tue_text_view.innerHTML="",tue_text_block.style.visibility="visible",values_in_text(!1),clearTimeout(dialog_timeout),anim_text(),arr_dialog.text.className&&(tue_text_block.className=arr_dialog.text.className)):arr_dialog.text_add&&""!=arr_dialog.text_add&&""!=arr_dialog.text_add[languare]?(tue_text_view.innerHTML="",tue_text_block.style.visibility="visible",values_in_text(!0),clearTimeout(dialog_timeout),anim_text()):tue_text_block.style.visibility="hidden",arr_dialog.color?tue_text_block.style.backgroundColor=arr_dialog.color:story_json.parameters.text_panel.color&&(tue_text_block.style.backgroundColor=story_json.parameters.text_panel.color),arr_dialog.color_text?tue_text_view.style.color=arr_dialog.color_text:story_json.parameters.text_panel.color_text&&(tue_text_view.style.color=story_json.parameters.text_panel.color_text),arr_dialog.name?(bg_art(story_json.parameters.name_panel,"tue_name_block",!!story_json.parameters.characters[arr_dialog.name].art&&story_json.parameters.characters[arr_dialog.name].art),arr_dialog.name[languare]?(tue_name_block.innerHTML=arr_dialog.name[languare],tue_name_block.style.backgroundColor=arr_dialog.name.color,tue_name_block.style.color=arr_dialog.name.color_text,arr_dialog.name.className&&(tue_name_block.className=arr_dialog.name.className)):story_json.parameters.characters?story_json.parameters.characters[arr_dialog.name]?(story_json.parameters.characters[arr_dialog.name].style&&(tue_name_block.style=story_json.parameters.characters[arr_dialog.name].style,name_block_update()),tue_name_block.innerHTML=story_json.parameters.characters[arr_dialog.name][languare],tue_name_block.style.backgroundColor=story_json.parameters.characters[arr_dialog.name].color,tue_name_block.style.color=story_json.parameters.characters[arr_dialog.name].color_text,story_json.parameters.characters[arr_dialog.name].className&&(tue_name_block.className=story_json.parameters.characters[arr_dialog.name].className)):(tue_name_block.innerHTML=arr_dialog.name,tue_name_block.style.backgroundColor=arr_dialog.name.color,tue_name_block.style.color=arr_dialog.name.color_text,arr_dialog.name.className&&(tue_name_block.className=arr_dialog.name.className)):tue_name_block.innerHTML=arr_dialog.name,tue_name_block.style.visibility="visible"):tue_name_block.style.visibility="hidden",arr_dialog.video){var video=document.getElementById("tue_video");video||((video=document.createElement("video")).id="tue_video",video.classList.add("tue_v")),arr_dialog.video.style?video.style=arr_dialog.video.style:video.style="",arr_dialog.video.className&&(video.style=arr_dialog.video.className+" tue_v"),video.style.position="absolute",video.setAttribute("onloadedmetadata",""),video.src=art_data(arr_dialog.video.url),video.style.left="50%",video.style.top="50%",video.style.transform="translate(-50%,-50%)",arr_dialog.video.fit&&("contain"==arr_dialog.video.fit?(video.style.width="100%",video.style.height="100%"):"position"==arr_dialog.video.fit&&(video.style.transform="none",video.style.width=arr_dialog.video.size[0],video.style.height=arr_dialog.video.size[1],0!=arr_dialog.video.position[0]&&(video.style.left=arr_dialog.video.position[0]),0!=arr_dialog.video.position[1]&&(video.style.right=arr_dialog.video.position[1]),0!=arr_dialog.video.position[2]&&(video.style.top=arr_dialog.video.position[2]),0!=arr_dialog.video.position[3]&&(video.style.bottom=arr_dialog.video.position[3]))),arr_dialog.video.loop?video.loop=arr_dialog.video.loop:video.loop=!1,arr_dialog.video.sound&&arr_dialog.video.sound>0?(video.muted=!1,video.volume=arr_dialog.video.sound/100):video.muted=!0,arr_dialog.video.time_start?video.onloadedmetadata=function(){this.currentTime=arr_dialog.video.time_start,arr_dialog.video.fit&&"cover"!=arr_dialog.video.fit||video_size(),arr_dialog.video.stop&&this.pause()}:"cover"!=arr_dialog.video.fit&&arr_dialog.video.fit||(video.onloadedmetadata=function(){video_size()}),arr_dialog.video.time_end?arr_dialog.video.loop?video.ontimeupdate=function(){video.currentTime>=arr_dialog.video.time_end&&(video.currentTime=arr_dialog.video.time_start?arr_dialog.video.time_start:0)}:arr_dialog.video.go_to?video.ontimeupdate=function(){video.currentTime>=arr_dialog.video.time_end&&(video.pause(),"tue_go"==arr_dialog.video.go_to?go_story(!0):go_to(arr_dialog.video.go_to))}:video.ontimeupdate=function(){video.currentTime>=arr_dialog.video.time_end&&video.pause()}:video.onended=function(){"tue_go"==arr_dialog.video.go_to?go_story(!0):go_to(arr_dialog.video.go_to)},arr_dialog.video.stop&& !0==arr_dialog.video.stop||(video.autoplay=!0),tuesday.appendChild(video)}else del_element("tue_v");if(arr_dialog.art){var old=document.getElementById("tuesday").getElementsByClassName("tue_art"),src=!1;if(old.length>0){for(d=0;d<old.length;d++)old[d].classList.add("img_del");for(i=0;i<arr_dialog.art.length;i++){for(o=0,src=!1;o<old.length;o++)if(arr_dialog.art[i].url==old[o].getAttribute("volume")||arr_dialog.art[i].url[languare]==old[o].getAttribute("volume")){arr_dialog.art[i].move&&0!=arr_dialog.art[i].move?(old[o].style.transitionDuration=arr_dialog.art[i].move+"s",arr_dialog.art[i].speed&&""!=arr_dialog.art[i].speed?old[o].style.transitionTimingFunction=arr_dialog.art[i].speed:old[o].style.transitionTimingFunction=null):(old[o].style.transitionDuration=null,old[o].style.transitionTimingFunction=null),arr_dialog.art[i].opacity?old[o].style.opacity=arr_dialog.art[i].opacity:old[o].style.opacity=null,arr_dialog.art[i].fit&&(old[o].style.objectFit=arr_dialog.art[i].fit),arr_dialog.art[i].size&&(old[o].style.width=arr_dialog.art[i].size[0],old[o].style.height=arr_dialog.art[i].size[1]),arr_dialog.art[i].align?old[o].style.objectPosition=arr_dialog.art[i].align[0]+" "+arr_dialog.art[i].align[1]:old[o].style.objectPosition="center",old[o].style.transform=(arr_dialog.art[i].hotspot&&0!=arr_dialog.art[i].hotspot[0]&&0!=arr_dialog.art[i].hotspot[1]?" translate("+arr_dialog.art[i].hotspot[0]+","+arr_dialog.art[i].hotspot[1]+")":"")+(arr_dialog.art[i].angle?"rotate("+arr_dialog.art[i].angle+"deg)":""),0!=arr_dialog.art[i].position[0]&&(old[o].style.left=arr_dialog.art[i].position[0]),0!=arr_dialog.art[i].position[1]&&(old[o].style.left="calc(100% - "+arr_dialog.art[i].position[1]+" - "+("auto"==arr_dialog.art[i].size[0]?arr_dialog.art[i].size[1]:arr_dialog.art[i].size[0])+")"),0!=arr_dialog.art[i].position[2]&&(old[o].style.top=arr_dialog.art[i].position[2]),0!=arr_dialog.art[i].position[3]&&(old[o].style.top="calc(100% - "+arr_dialog.art[i].position[3]+" - "+("auto"==arr_dialog.art[i].size[1]?arr_dialog.art[i].size[0]:arr_dialog.art[i].size[1])+")"),src=!0,old[o].style.zIndex=i,old[o].classList.remove("img_del");break}!1==src&&creation_art(i)}del_element("img_del")}else for(i=0;i<arr_dialog.art.length;i++)creation_art(i);function creation_art(i){var art=document.createElement("img");arr_dialog.art[i].className&&(art.classList=arr_dialog.art[i].className),art.src=art_data(arr_dialog.art[i].url),art.setAttribute("volume",arr_dialog.art[i].url[languare]?arr_dialog.art[i].url[languare]:arr_dialog.art[i].url),art.classList.add("tue_art"),art.style="user-select:text;"+(arr_dialog.art[i].style?arr_dialog.art[i].style:""),art.style.position="absolute",arr_dialog.art[i].fit&&(art.style.objectFit=arr_dialog.art[i].fit),arr_dialog.art[i].opacity?art.style.opacity=arr_dialog.art[i].opacity:art.style.opacity=null,arr_dialog.art[i].size&&(art.style.width=arr_dialog.art[i].size[0],art.style.height=arr_dialog.art[i].size[1]),art.style.transform=(arr_dialog.art[i].hotspot&&0!=arr_dialog.art[i].hotspot[0]&&0!=arr_dialog.art[i].hotspot[1]?" translate("+arr_dialog.art[i].hotspot[0]+","+arr_dialog.art[i].hotspot[1]+")":"")+(arr_dialog.art[i].angle?"rotate("+arr_dialog.art[i].angle+"deg)":""),arr_dialog.art[i].align&&(art.style.objectPosition=arr_dialog.art[i].align[0]+" "+arr_dialog.art[i].align[1]),0!=arr_dialog.art[i].position[0]&&(art.style.left=arr_dialog.art[i].position[0]),0!=arr_dialog.art[i].position[1]&&(art.style.left="calc(100% - "+arr_dialog.art[i].position[1]+" - "+arr_dialog.art[i].size[0]+")"),0!=arr_dialog.art[i].position[2]&&(art.style.top=arr_dialog.art[i].position[2]),0!=arr_dialog.art[i].position[3]&&(art.style.top="calc(100% - "+arr_dialog.art[i].position[3]+" - "+arr_dialog.art[i].size[1]+")"),art.setAttribute("draggable","false"),art.style.zIndex=i,arr_dialog.art[i].show_if&&show_if(arr_dialog.art[i].show_if,art),tuesday.appendChild(art)}}else del_element("tue_art");var button_ui=document.getElementsByClassName("tue_controll");for(i=0;i<button_ui.length;i++)story_json.parameters.buttons[i].text&&art_data(story_json.parameters.buttons[i].text).length>0&&(button_ui[i].innerHTML=values_button(art_data(story_json.parameters.buttons[i].text)));if(arr_dialog.choice)for(i=0,tue_next.style.visibility="hidden";i<arr_dialog.choice.length;i++){var choice=document.createElement("div");arr_dialog.choice[i].className&&(choice.className=arr_dialog.choice[i].className),arr_dialog.choice[i].style&&(choice.style=arr_dialog.choice[i].style),choice.classList.add("tue_choice"),choice.style.position="absolute",choice.style.backgroundColor=arr_dialog.choice[i].color,choice.style.whiteSpace="pre-wrap",choice.style.backgroundRepeat="no-repeat",choice.style.backgroundPosition=arr_dialog.choice[i].art_align?arr_dialog.choice[i].art_align[0]+" "+arr_dialog.choice[i].art_align[1]:"center",story_json.parameters.cursors&&story_json.parameters.cursors.choice&&(choice.style.cursor="url("+art_data(story_json.parameters.cursors.choice[0])+") "+story_json.parameters.cursors.choice[1]+" "+story_json.parameters.cursors.choice[2]+",auto"),arr_dialog.choice[i].art&&art_data(arr_dialog.choice[i].art).length>0&&(choice.style.backgroundImage="url('"+art_data(arr_dialog.choice[i].art)+"')"),arr_dialog.choice[i].size&&(0!=arr_dialog.choice[i].size[0]&&(choice.style.width=arr_dialog.choice[i].size[0]),0!=arr_dialog.choice[i].size[1]&&(choice.style.height=arr_dialog.choice[i].size[1])),arr_dialog.choice[i].art_size&&("patch"==arr_dialog.choice[i].art_size&&(choice.style.backgroundImage="none"),"object"==typeof arr_dialog.choice[i].art_size?choice.style.backgroundSize=arr_dialog.choice[i].art_size[0]+" "+arr_dialog.choice[i].art_size[1]:"patch"==arr_dialog.choice[i].art_size?(choice.style.backgroundImage="none",choice.style.backgroundSize="none",choice.style.backgroundClip="padding-box",choice.style.borderStyle="solid",choice.style.borderWidth=arr_dialog.choice[i].patch[0]+"px "+arr_dialog.choice[i].patch[1]+"px "+arr_dialog.choice[i].patch[2]+"px "+arr_dialog.choice[i].patch[3]+"px",choice.style.borderImage="url('"+art_data(arr_dialog.choice[i].art)+"') "+arr_dialog.choice[i].patch[0]+" "+arr_dialog.choice[i].patch[1]+" "+arr_dialog.choice[i].patch[2]+" "+arr_dialog.choice[i].patch[3]+" stretch stretch"):choice.style.backgroundSize=arr_dialog.choice[i].art_size),choice.style.transform=(arr_dialog.choice[i].hotspot&&0!=arr_dialog.choice[i].hotspot[0]&&0!=arr_dialog.choice[i].hotspot[1]?" translate("+arr_dialog.choice[i].hotspot[0]+","+arr_dialog.choice[i].hotspot[1]+")":"")+(arr_dialog.choice[i].angle?"rotate("+arr_dialog.choice[i].angle+"deg)":""),0!=arr_dialog.choice[i].position[0]&&(choice.style.left=arr_dialog.choice[i].position[0]),0!=arr_dialog.choice[i].position[1]&&(choice.style.right=arr_dialog.choice[i].position[1]),0!=arr_dialog.choice[i].position[2]&&(choice.style.top=arr_dialog.choice[i].position[2]),0!=arr_dialog.choice[i].position[3]&&(choice.style.bottom=arr_dialog.choice[i].position[3]),choice.style.color=arr_dialog.choice[i].color_text,choice.style.padding=arr_dialog.choice[i].indent_text,choice.style.fontSize=arr_dialog.choice[i].size_text?arr_dialog.choice[i].size_text:story_json.parameters.font_size,choice.style.fontFamily=arr_dialog.choice[i].font_family?arr_dialog.choice[i].font_family:story_json.parameters.font,choice.style.display="flex",choice.style.justifyContent=arr_dialog.choice[i].align?arr_dialog.choice[i].align[0]:"center",choice.style.alignItems=arr_dialog.choice[i].align?arr_dialog.choice[i].align[1]:"center",choice.style.zIndex=1001+i,arr_dialog.choice[i].show_if&&show_if(arr_dialog.choice[i].show_if,choice),arr_dialog.choice[i].text&&("object"!=typeof arr_dialog.choice[i].text||arr_dialog.choice[i].text[languare]&&"object"!=typeof arr_dialog.choice[i].text[languare])&&(choice.innerHTML=values_button(art_data(arr_dialog.choice[i].text)));var v="";if(arr_dialog.choice[i].variables)for(var g=0;g<arr_dialog.choice[i].variables.length;g++)"add"==arr_dialog.choice[i].variables[g][1]?v+="story_json.parameters.variables."+arr_dialog.choice[i].variables[g][0]+"+="+("number"==typeof arr_dialog.choice[i].variables[g][2]?arr_dialog.choice[i].variables[g][2]:"'"+arr_dialog.choice[i].variables[g][2]+"'")+";":"set"==arr_dialog.choice[i].variables[g][1]&&(v+="story_json.parameters.variables."+arr_dialog.choice[i].variables[g][0]+"="+("number"==typeof arr_dialog.choice[i].variables[g][2]?arr_dialog.choice[i].variables[g][2]:"'"+arr_dialog.choice[i].variables[g][2]+"'")+";");if(arr_dialog.choice[i].js&&(v+=arr_dialog.choice[i].js+";"),arr_dialog.choice[i].go_to){var g=arr_dialog.choice[i].go_to;if(story_json.parameters.languares.length>1)for(var l=0;l<story_json.parameters.languares.length;l++)g=="tue_"+story_json.parameters.languares[l]&&(g=8,choice.setAttribute("onclick",v+"languare='"+story_json.parameters.languares[l]+"'"));"tue_go"==g?choice.setAttribute("onclick","del_element('tue_choice'); "+v+"go_story(true);"+add_sound()):"tue_load_autosave"==g?choice.setAttribute("onclick",v+"load_stag('auto');"+add_sound()):"load"==g||"tue_load"==g?choice.setAttribute("onclick",v+"load_stag('bookmark');"+add_sound()):"tue_save"==g?choice.setAttribute("onclick",v+"save_stag('bookmark');"+add_sound()):"tue_no"==g||""==g?choice.setAttribute("onclick",v+add_sound()):"tue_fullScreen"==g?choice.setAttribute("onclick",v+"full_screen();"+add_sound()):"tue_home"==g?choice.setAttribute("onclick",v+'go_to("'+story_json.parameters.launch_story+'");'+add_sound()):"tue_back"==g?choice.setAttribute("onclick",v+"back_story();"+add_sound()):"tue_next"==g?choice.setAttribute("onclick",v+"go_story();"+add_sound()):8!=g&&arr_dialog.choice[i].text_from?choice.setAttribute("onclick",v+"tue_story='"+arr_dialog.choice[i].go_to+"';scene=0;dialog=0;creation_dialog();"+add_sound()):8!=g&&choice.setAttribute("onclick",v+"go_to('"+g+"');"+add_sound())}else choice.setAttribute("onclick",v+"go_story(true);del_element('tue_choice');"+add_sound());function add_sound(){var s="";return arr_dialog.choice[i].sound&&(s=get_sound(arr_dialog.choice[i].sound)),arr_dialog.choice[i].sound_stop&&(s+=get_stop_sound(arr_dialog.choice[i].sound_stop)),s}tuesday.appendChild(choice)}if(del_element("tue_html_dialog"),arr_dialog.html){if(arr_dialog.html[languare]){var html=document.createElement("div");html.className="tue_html_dialog",html.innerHTML=arr_dialog.html[languare],tuesday.appendChild(html)}else{var html=document.createElement("div");html.className="tue_html_dialog",html.innerHTML=arr_dialog.html,tuesday.appendChild(html)}}if(arr_dialog.variables)for(var i=0;i<arr_dialog.variables.length;i++){var choice_n=arr_dialog.variables[i][0];"add"==arr_dialog.variables[i][1]?(story_json.parameters.variables[choice_n]+=arr_dialog.variables[i][2],tuesday.dispatchEvent(new Event(arr_dialog.variables[i][0]+"_add"))):"set"==arr_dialog.variables[i][1]&&(story_json.parameters.variables[choice_n]=arr_dialog.variables[i][2]),tuesday.dispatchEvent(new Event(arr_dialog.variables[i][0]+"_set"))}if(arr_dialog.event&&tuesday.dispatchEvent(new Event(arr_dialog.event)),arr_dialog.sound_stop){var s=arr_dialog.sound_stop;sound_stop(s[languare]?s[languare]:s)}if(arr_dialog.sound){var s=arr_dialog.sound;sound_play(s[languare]?s[languare]:s)}arr_dialog.js&&eval(arr_dialog.js),clearTimeout(timers),arr_dialog.timer&&(timers=setTimeout(function(){"tue_go"==arr_dialog.timer[1]?go_story(!0):go_to(arr_dialog.timer[1])},arr_dialog.timer[0])),tuesday.dispatchEvent(new Event("creation_dialog"))}function values_in_text(add){arr_dialog=story_json[tue_story][scene].dialogs[dialog];var str="";add?(dialog_letter=dialog_text.length,str=dialog_text,str+=arr_dialog.text_add[languare]?arr_dialog.text_add[languare]:arr_dialog.text_add):(dialog_letter=0,str=arr_dialog.text[languare]?arr_dialog.text[languare]:arr_dialog.text);let regexp=/<(.*?)>/g;ruby_rt=[];let matchAll=str.matchAll(regexp);matchAll=Array.from(matchAll);for(var i=0;i<matchAll.length;i++){let firstMatch=matchAll[i];if(firstMatch[1].includes("=")){var t=firstMatch[1].split("=")[0];ruby_rt.push([t,ruby(firstMatch[1])]),str=str.replace(firstMatch[0],t)}else str=str.replace(firstMatch[0],story_json.parameters.variables[firstMatch[1]])}dialog_text=str}function values_button(e){let t=e.matchAll(/<(.*?)>/g);t=Array.from(t);for(var a=0;a<t.length;a++){let o=t[a];e=o[1].includes("=")?e.replace(o[0],ruby(o[1])):e.replace(o[0],story_json.parameters.variables[o[1]])}return e}function ruby(n){var r=n.split("=");return"<ruby>"+r[0]+"<rt>"+r[1]+"</rt></ruby>"}function go_story(choice){(!(arr_dialog=story_json[tue_story][scene].dialogs[dialog]).choice||choice)&&(arr_dialog.go_to?go_to(arr_dialog.go_to):dialog<story_json[tue_story][scene].dialogs.length-1?(dialog++,arr_dialog.text?"skip"==arr_dialog.text[languare]?go_story():creation_dialog():arr_dialog.text_add&&"skip"==arr_dialog.text_add[languare]?go_story():creation_dialog()):++scene>=story_json[tue_story].length?scene=story_json[tue_story].length-1:(dialog=0,creation_scene()),story_json.parameters.autosave&&!story_json[tue_story][scene].dialogs[dialog].no_autosave&&save_stag("auto"))}function back_story(){(arr_dialog=story_json[tue_story][scene].dialogs[dialog],del_element("tue_choice"),del_element("tue_html_dialog"),arr_dialog.back_to)?go_to(arr_dialog.back_to):dialog>0?(dialog-=1,(arr_dialog=story_json[tue_story][scene].dialogs[dialog]).text?"skip"==arr_dialog.text[languare]?back_story():creation_dialog():arr_dialog.text_add?"skip"==arr_dialog.text_add[languare]?back_story():(dialog_text=arr_dialog.text?dialog_text.replace(arr_dialog.text_add[languare],""):"",creation_dialog()):(creation_dialog(),del_element("tue_choice"),del_element("tue_html_dialog"))):((scene-=1)<0?(scene=0,dialog=0):dialog=story_json[tue_story][scene].dialogs.length-1,creation_scene()),story_json.parameters.autosave&&!story_json[tue_story][scene].dialogs[dialog].no_autosave&&save_stag("auto")}function save_stag(tip){localStorage.setItem("tue_"+tip+"_scene",scene),localStorage.setItem("tue_"+tip+"_dialog",dialog),localStorage.setItem("tue_"+tip+"_story",tue_story),story_json.parameters.variables&&localStorage.setItem("tue_"+tip+"_data",JSON.stringify(story_json.parameters.variables)),"bookmark"==tip&&tuesday.dispatchEvent(new Event("save"))}function load_stag(tip){story_json[localStorage.getItem("tue_"+tip+"_story")]&&(del_element("tue_choice"),del_element("tue_html_sc"),scene=localStorage.getItem("tue_"+tip+"_scene"),dialog=localStorage.getItem("tue_"+tip+"_dialog"),tue_story=localStorage.getItem("tue_"+tip+"_story"),story_json.parameters.variables=JSON.parse(localStorage.getItem("tue_"+tip+"_data")),creation_scene(),search_music(),tuesday.dispatchEvent(new Event("load")))}function go_to(go){del_element("tue_choice"),del_element("tue_html_dialog"),tue_story=go,dialog=0,scene=0,creation_scene()}function del_element(element){for(var del=document.getElementById("tuesday").getElementsByClassName(element),len=del.length,i=0;i<len;i++)del[0].parentNode.removeChild(del[0])}function anim_text(){if(0==dialog_speed){for(var i=0;i<ruby_rt.length;i++)dialog_text=dialog_text.replace(new RegExp(ruby_rt[i][0],"g"),ruby_rt[i][1]);tue_text_view.innerHTML=dialog_text.replace(new RegExp("\n","g"),"<br>")}else 0!=dialog_speed&&dialog_letter<=dialog_text.length?dialog_timeout=setTimeout(add_letter,dialog_speed):dialog_letter>=dialog_text.length&&(tue_text_view.innerHTML+=story_json.parameters.text_panel.end_text_cursor&&story_json.parameters.text_panel.end_text_cursor[0]?'&nbsp<img src="'+story_json.parameters.text_panel.end_text_cursor[0]+'" style="width:'+(story_json.parameters.text_panel.end_text_cursor[1]?story_json.parameters.text_panel.end_text_cursor[1]:"auto")+";height:"+(story_json.parameters.text_panel.end_text_cursor[2]?story_json.parameters.text_panel.end_text_cursor[2]:"auto")+";position:absolute;"+(story_json.parameters.text_panel.end_text_cursor[3]?story_json.parameters.text_panel.end_text_cursor[3]:"")+'">':"",tuesday.dispatchEvent(new Event("dialog_end")));story_json.parameters.text_panel.scroll&&(tue_text_view.scrollTop=tue_text_view.scrollHeight)}function add_letter(){for(var t=dialog_text.slice(0,dialog_letter).replace(new RegExp("\n","g"),"<br>"),i=0;i<ruby_rt.length;i++)t=t.replace(new RegExp(ruby_rt[i][0],"g"),ruby_rt[i][1]);tue_text_view.innerHTML=t,dialog_letter++,anim_text()}function search_music(){for(var i=scene;i>=0;i--)if(story_json[tue_story][i].background_music){tue_bg_music.canPlayType("audio/mpeg")?"number"==typeof story_json[tue_story][i].background_music?tue_bg_music.src=story_json.base[story_json[tue_story][i].background_music-1]:story_json[tue_story][i].background_music.includes("blob:")?tue_bg_music.src=story_json[tue_story][i].background_music:story_json[tue_story][i].background_music.includes(".mp3")?tue_bg_music.src=story_json[tue_story][i].background_music:tue_bg_music.src=story_json[tue_story][i].background_music+".mp3":tue_bg_music.src=story_json[tue_story][i].background_music+".ogg",tue_bg_music.loop=!0,tue_bg_music.play();break}}function creation_sound(){for(var i=0;Object.keys(story_json.parameters.sounds)[i];){var audio=document.createElement("audio");audio.preload="auto",audio.id=Object.keys(story_json.parameters.sounds)[i],audio.canPlayType("audio/mpeg")?story_json.parameters.sounds[Object.keys(story_json.parameters.sounds)[i]].includes(";base64")?audio.src=story_json.parameters.sounds[Object.keys(story_json.parameters.sounds)[i]]:story_json.parameters.sounds[Object.keys(story_json.parameters.sounds)[i]].includes("blob:")?audio.src=story_json.parameters.sounds[Object.keys(story_json.parameters.sounds)[i]]:story_json.parameters.sounds[Object.keys(story_json.parameters.sounds)[i]].includes(".mp3")?audio.src=story_json.parameters.sounds[Object.keys(story_json.parameters.sounds)[i]]:audio.src=story_json.parameters.sounds[Object.keys(story_json.parameters.sounds)[i]]+".mp3":audio.src=story_json.parameters.sounds[Object.keys(story_json.parameters.sounds)[i]]+".ogg",tuesday.appendChild(audio),i++}}function get_sound(src){return src[languare]?"sound_play('"+src[languare]+"');":"sound_play('"+src+"');"}function get_stop_sound(src){return src[languare]?"sound_stop('"+src[languare]+"');":"sound_stop('"+src+"');"}function sound_play(id){var s=document.getElementById(id);s&&(s.currentTime=0,s.volume=1,s.play())}function sound_stop(id){document.getElementById(id).currentTime=0,document.getElementById(id).pause()}function add_style(file){var newlink=document.createElement("link");newlink.setAttribute("rel","stylesheet"),newlink.setAttribute("type","text/css"),newlink.setAttribute("href",file),document.getElementsByTagName("head").item(0).appendChild(newlink)}function full_screen(){tue_fullScreen?(tue_fullScreen=!1,document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()):(tue_fullScreen=!0,tuesday.requestFullscreen?tuesday.requestFullscreen():tuesday.mozRequestFullScreen?tuesday.mozRequestFullScreen():tuesday.webkitRequestFullscreen?tuesday.webkitRequestFullscreen():tuesday.msRequestFullscreen&&tuesday.msRequestFullscreen())}function art_data(data){return data[languare]?"number"==typeof data[languare]?story_json.base[data[languare]-1]:data[languare]:"number"==typeof data?story_json.base[data-1]:data}function video_size(){var video=document.getElementById("tue_video"),tue_size=tuesday.getBoundingClientRect();video.videoWidth/video.videoHeight>tue_size.width/tue_size.height?(video.style.height="100%",video.style.width="auto"):(video.style.height="auto",video.style.width="100%")}function show_if(data,element){show=!0;for(var v=1;v<data.length;v++){var var_name=data[v][0],var_oper=data[v][1];if("="==var_oper){if(story_json.parameters.variables[var_name]!=data[v][2]){show=!1;break}}else if(">"==var_oper){if(story_json.parameters.variables[var_name]<=data[v][2]){show=!1;break}}else if("<"==var_oper&&story_json.parameters.variables[var_name]>=data[v][2]){show=!1;break}if(!show)break}!show&&data[0]?element.style.visibility="hidden":show&&!data[0]&&(element.style.visibility="hidden")}document.oncontextmenu=cmenu,window.onmousedown=window.onselectstart=function(){return!1},document.addEventListener("keydown",function(b){var a=b.code;a==story_json.parameters.key.next&&controll?go_story():a==story_json.parameters.key.back&&controll?back_story():a==story_json.parameters.key.main?go_to(story_json.parameters.launch_story):a==story_json.parameters.key.save?save_stag("bookmark"):a==story_json.parameters.key.load?load_stag("bookmark"):a==story_json.parameters.key.autosave?load_stag("auto"):a==story_json.parameters.key.full_screen&&full_screen()});var wmap={startmove_x:null,startmove_y:null,scroll_x:null,scroll_y:null,scale:1};function terrain_map(){clearTimeout(dialog_timeout),arr_dialog=story_json[tue_story][scene].terrain_map,tue_text_view.innerHTML="",tuesday.style.backgroundImage="none";var o=document.createElement("div");o.id="tue_world",o.style="height:100%;width:100%;overflow:auto;",o.className="tue_html_scene";var e=document.createElement("div");arr_dialog.scale&&(wmap.scale=arr_dialog.scale),e.id="tue_map",e.className=arr_dialog.className,e.style=arr_dialog.style,e.style.width=arr_dialog.size[0]+"px",e.style.height=arr_dialog.size[1]+"px",e.style.backgroundRepeat="no-repeat",e.style.backgroundPosition="center",e.style.backgroundSize="cover",arr_dialog.color&&(o.style.backgroundColor=art_data(arr_dialog.color)),e.style.backgroundImage='url("'+art_data(arr_dialog.art)+'")',e.style.position="relative",e.style.overflow="hidden",e.style.transformOrigin="left top";for(var r=0;r<arr_dialog.objects.length;r++){var a=document.createElement("div");a.className=arr_dialog.objects[r].className,a.style=arr_dialog.objects[r].style,a.style.width=arr_dialog.objects[r].size[0]+"px",a.style.height=arr_dialog.objects[r].size[1]+"px",a.style.backgroundRepeat="no-repeat",a.style.backgroundPosition="center",a.style.backgroundSize=arr_dialog.objects[r].fit,a.style.backgroundImage='url("'+art_data(arr_dialog.objects[r].art)+'")',a.style.position="absolute",a.style.transform="rotate("+arr_dialog.objects[r].angle+"deg)",a.style.top=arr_dialog.objects[r].position[1]+"px",a.style.left=arr_dialog.objects[r].position[0]+"px",story_json.parameters.cursors&&story_json.parameters.cursors.choice&&(a.style.cursor="url("+art_data(story_json.parameters.cursors.choice[0])+") "+story_json.parameters.cursors.choice[1]+" "+story_json.parameters.cursors.choice[2]+",auto"),arr_dialog.objects[r].show_if&&show_if(arr_dialog.objects[r].show_if,a);var t="";arr_dialog.objects[r].sound?t+="sound_play('"+arr_dialog.objects[r].sound+"');":arr_dialog.sound&&(t+="sound_play('"+arr_dialog.sound+"');"),arr_dialog.objects[r].js&&(t+=arr_dialog.objects[r].js+";"),arr_dialog.objects[r].go_to&&(arr_dialog.objects[r].text_from?t+="tue_story='"+arr_dialog.objects[r].go_to+"';scene=0;dialog=0;creation_dialog();":t+="tue_world.remove();"+("tue_go"==arr_dialog.objects[r].go_to?"scene++;dialog=0;creation_scene();":"go_to('"+arr_dialog.objects[r].go_to+"');")),a.setAttribute("onclick",t),e.appendChild(a)}o.onmousedown=function(e){wmap.startmove_x=e.clientX,wmap.startmove_y=e.clientY,wmap.scroll_x=o.scrollTop,wmap.scroll_y=o.scrollLeft,document.onmousemove=function(e){o.scrollTop=wmap.scroll_x-(e.clientY-wmap.startmove_y),o.scrollLeft=wmap.scroll_y-(e.clientX-wmap.startmove_x)},document.onmouseup=function(e){document.onmousemove=null,document.onmouseup=null,arr_dialog.scroll&&(arr_dialog.scroll[1]=o.scrollTop,arr_dialog.scroll[0]=o.scrollLeft)},document.onmouseleave=function(){document.onmousemove=null,document.onmouseup=null,arr_dialog.scroll[1]=o.scrollTop,arr_dialog.scroll[0]=o.scrollLeft}},arr_dialog.background_music&&(tue_bg_music.canPlayType("audio/mpeg")?arr_dialog.background_music.includes("blob:")?tue_bg_music.src=arr_dialog.background_music:arr_dialog.background_music.includes(".mp3")?tue_bg_music.src=arr_dialog.background_music:tue_bg_music.src=arr_dialog.background_music+".mp3":tue_bg_music.src=arr_dialog.background_music+".ogg",tue_bg_music.loop=!0,tue_bg_music.play()),tue_next.style.visibility="hidden",tue_back.style.visibility="hidden",o.appendChild(e),tuesday.appendChild(o),worldmap_resize(),arr_dialog.scroll&&(o.scrollTop=arr_dialog.scroll[1],o.scrollLeft=arr_dialog.scroll[0])}function worldmap_resize(){var o=tuesday.getBoundingClientRect();arr_dialog.size[0]/arr_dialog.size[1]>o.width/o.height?tue_map.style.transform="scale("+o.height/arr_dialog.size[1]*wmap.scale+")":tue_map.style.transform="scale("+o.width/arr_dialog.size[0]*wmap.scale+")",tue_map.style.marginBottom="-"+(o.height+arr_dialog.size[1])+"px",tue_map.style.marginRight="-"+(o.width+arr_dialog.size[0])+"px",tue_map.style.marginTop="0px",tue_map.style.marginLeft="0px"}tuesday.addEventListener("terrain_map",function(o){terrain_map()}),window.addEventListener("resize",worldmap_resize,!0); </script><script>let story_novel={"parameters":{"text_panel":{"size":["95%","25%"],"position":[],"color":"#efefff","color_text":"#000","indent_text":"8px","indent_bottom":"32px","size_text":"20px","style":"border-radius:16px;","dialog_speed":"10","art":{"en":""}},"name_panel":{"size":["222px","48px"],"position":["0","0","-48px","0"],"indent_text":"8px","size_text":"18px","color_text":"#000","align":["flex-start","center"],"art":{"en":""}},"title":"MaxNat","launch_story":"Start","languares":["en"],"buttons":[{"name":"tue_back","style":"border-radius:26px;","position":["2.5%","0","0","32px"],"size":["38px","38px"],"color":"","color_text":"#000","size_text":"28px","text":"<","art":{"en":""},"sound":{"en":""},"hotspot":["0%","0%"]},{"name":"tue_next","style":"border-radius:26px;","position":["0","2.5%","0","32px"],"size":["38px","38px"],"color":"","color_text":"#000","size_text":"28px","text":">","art":{"en":""},"sound":{"en":""},"hotspot":["0%","0%"]}],"style_file":"","autosave":false,"font":"Arial","variables":{"variable1":"跟着Max回家"},"characters":{"Max":{"en":"Max"},"Nat":{"en":"Nat"}}},"Start":[{"background_image":"台子.jpg","dialogs":[{"text":"台上，nat对着麦吐舌头，眨眨眼睛，还用手指戳了戳麦的透明面屏，在台上麦只能忍着。"}]},{"background_image":"停车场.jpg","dialogs":[{"text":"活动结束，跟工作人员一一告别后，麦拉着nat去了停车场准备送nat回家。","go_to":"car"}]}],"car":[{"background_image":"车上.jpg","dialogs":[{"art":[{"position":["-14.73%",0,"0.29%",0],"size":["63.07%","70.46%"],"url":"max.png","fit":"contain","hotspot":["0%","0%"]}],"text":"\"nat，刚刚好玩吗？\"\n麦一脸调笑的看着坐在副驾驶的nat","name":"Max"},{"art":[{"position":["40.63%",0,"9.92%",0],"size":["83.38%","60.68%"],"url":"nat.png","fit":"contain","hotspot":["0%","0%"]}],"text":"nat睁着亮晶晶的大眼睛看着麦","name":"Nat"},{"art":[{"position":["40.63%",0,"9.92%",0],"size":["83.38%","60.68%"],"url":"nat.png","fit":"contain","hotspot":["0%","0%"]}],"text":"“叔叔不喜欢我戳你的脸吗？还是不喜欢我了？”\nnat的语气里逐渐露出了委屈","name":"Nat"},{"art":[{"position":["-14.73%",0,"0.29%",0],"size":["63.07%","70.46%"],"url":"max.png","fit":"contain","hotspot":["0%","0%"]}],"text":"“没有呐，叔叔很喜欢只是那么多人，我会忍不住的。”\n看着宝贝娇俏的小脸，麦忍不住揉了揉。","name":"Max"},{"art":[{"position":["40.63%",0,"9.92%",0],"size":["83.38%","60.68%"],"url":"nat.png","fit":"contain","hotspot":["0%","0%"]}],"text":"nat在麦的手背上亲了一下","name":"Nat"},{"text":"Nat被身后的麦一把推到在了后座上"},{"art":[{"position":["40.63%",0,"9.92%",0],"size":["83.38%","60.68%"],"url":"nat.png","fit":"contain","hotspot":["0%","0%"]}],"text":"\"哦咦 干什么啊叔叔\"","name":"Nat"},{"art":[{"position":["-14.73%",0,"0.29%",0],"size":["63.07%","70.46%"],"url":"max.png","fit":"contain","hotspot":["0%","0%"]}],"text":"\"不乖的孩子是要受到惩罚的\"","name":"Max"},{"text":"狭窄的车厢随着麦庞大身躯压上来而变得温度升高"},{"art":[{"position":["-14.73%",0,"0.29%",0],"size":["63.07%","70.46%"],"url":"max.png","fit":"contain","hotspot":["0%","0%"]}],"text":"“刚才做什么了嗯？”","name":"Max"},{"art":[{"position":["40.63%",0,"9.92%",0],"size":["83.38%","60.68%"],"url":"nat.png","fit":"contain","hotspot":["0%","0%"]}],"text":"“没。。。没什么啊”\nNat因为紧张变得结结巴巴","name":"Nat","go_to":"Do"}]}],"Do":[{"background_image":"车上.jpg","dialogs":[{"text":"地下车库随时都会有人经过，可能被人发现的氛围让奶特身体升起某名的羞耻感"},{"text":"麦的手坏心的从奶衣服下摆伸了进去，手指若有若无的拂过奶胸前微微隆起是一点"},{"art":[{"position":["40.63%",0,"9.92%",0],"size":["83.38%","60.68%"],"url":"nat.png","fit":"contain","hotspot":["0%","0%"]}],"text":"“嗯....”\n一丝呻吟没忍住溜了出来，羞耻感让奶身体变得敏感泛着粉红","name":"Nat"},{"art":[{"position":["40.63%",0,"9.92%",0],"size":["83.38%","60.68%"],"url":"nat.png","fit":"contain","hotspot":["0%","0%"]}],"text":"“叔叔在这里会被人听到的呐”\n某人这么说着确把手偷偷伸向麦的拉链拉了下来，手隔着内裤描绘着大麦的轮廓","name":"Nat"},{"art":[{"position":["40.63%",0,"9.92%",0],"size":["83.38%","60.68%"],"url":"nat.png","fit":"contain","hotspot":["0%","0%"]}],"text":"看来调皮宝贝并不想停下来呢！","name":"Nat"},{"art":[{"position":["-14.73%",0,"0.29%",0],"size":["63.07%","70.46%"],"url":"max.png","fit":"contain","hotspot":["0%","0%"]}],"text":"“这就忍不住了吗？”\n麦嘴角微微上扬","name":"Max"},{"art":[{"position":["-14.73%",0,"0.29%",0],"size":["63.07%","70.46%"],"url":"max.png","fit":"contain","hotspot":["0%","0%"]}],"text":"带着一股玩味凑近奶的耳朵\n“可是我都还没有做什么呐。”","name":"Max"},{"art":[{"position":["-14.73%",0,"0.29%",0],"size":["63.07%","70.46%"],"url":"max.png","fit":"contain","hotspot":["0%","0%"]}],"text":"麦的声音本身就很好听，此时故意的压低了声线，更有说不出的挑逗意味。","name":"Max"},{"art":[{"position":["40.63%",0,"9.92%",0],"size":["83.38%","60.68%"],"url":"nat.png","fit":"contain","hotspot":["0%","0%"]}],"text":"温热的鼻吸近距离喷在奶的耳背，脖子\n奶只觉得理智的弦快要断调，仅存的理智即将溃不成军","name":"Nat"},{"art":[{"position":["-14.73%",0,"0.29%",0],"size":["63.07%","70.46%"],"url":"max.png","fit":"contain","hotspot":["0%","0%"]}],"text":"麦叔拖着奶特的手腕，将他推进密闭的车厢，顺势放倒了座椅。","name":"Max"},{"art":[{"position":["40.63%",0,"9.92%",0],"size":["83.38%","60.68%"],"url":"nat.png","fit":"contain","hotspot":["0%","0%"]}],"text":"奶特已经被刚刚压在车门上的亲吻弄得情动，急促地呼吸着，\n“p'Max,一定要在车里吗？”","name":"Nat"}]}]};load_story('data',story_novel);</script></body></html>